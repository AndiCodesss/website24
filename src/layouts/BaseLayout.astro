---
import '../styles/global.css'; // Link to our new CSS file

const { title } = Astro.props;
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <title>{title || 'Andreas Oberdörfer'}</title>
</head>
<body>
    <nav>
        <a href="/">Home</a>
        <a href="/contact">Contact</a>
    </nav>
    <main>
        <slot /> <!-- Page content will go here -->
    </main>
    <footer>
        <p>&copy; {new Date().getFullYear()} Andreas Oberdörfer</p>
        <p class="hint">(Hint: Try ↑ ↑ ↓ ↓ ← → ← → B A for a surprise!)</p>
    </footer>

    <!-- Konami Code Image -->
    <img src="/konami-pic.jpg" alt="Konami Code Surprise!" class="konami-image" id="konamiImage" />

    <script>
        const konamiCode = [
            'ArrowUp', 'ArrowUp',
            'ArrowDown', 'ArrowDown',
            'ArrowLeft', 'ArrowRight',
            'ArrowLeft', 'ArrowRight',
            'b', 'a'
        ];
        let index = 0;

        document.addEventListener('keydown', (event) => {
            const requiredKey = konamiCode[index];
            // Use event.key.toLowerCase() for letter keys to make it case-insensitive
            const pressedKey = (event.key.length === 1) ? event.key.toLowerCase() : event.key;

            if (pressedKey === requiredKey) {
                index++;
                if (index === konamiCode.length) {
                    // Code entered correctly!
                    activateKonami();
                    index = 0; // Reset index
                }
            } else {
                // Wrong key, reset index
                index = 0;
                 // Optional: Reset if the first key pressed is wrong but matches the first konami key again
                 if (pressedKey === konamiCode[0]) {
                    index = 1;
                 }
            }
        });

        function activateKonami() {
            console.log("Konami Activated! Niceeee!");
            document.body.classList.add('konami-effect');
            const img = document.getElementById('konamiImage');
            if (img) {
                img.classList.add('show');
            }

            // Hide after a few seconds
            setTimeout(() => {
                document.body.classList.remove('konami-effect');
                if (img) {
                    img.classList.remove('show');
                }
            }, 10000); // Show for 10 seconds
        }
    </script>
</body>
</html> 